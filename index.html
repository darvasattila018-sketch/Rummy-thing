<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Rummy Points</title>
<style>
body { font-family: Arial, sans-serif; padding: 20px; }
h1 { text-align: center; }
.row { display: flex; justify-content: space-between; align-items: center; margin: 12px 0; }
.name { font-weight: bold; cursor: pointer; }
input[type="number"] { width: 80px; padding: 6px; text-align: right; }
button { width: 100%; padding: 14px; font-size: 16px; margin-top: 10px; }
</style>
</head>
<body>

<h1>Rummy Points</h1>
<div id="players"></div>

<button onclick="addRound()">Add Round</button>
<button onclick="resetGame()">Reset Game</button>

<script>
const defaultNames = ["Player 1", "Player 2", "Player 3", "Player 4"];
let names = [];
let totals = [];

function load() {
    try {
        names = JSON.parse(localStorage.getItem("names")) || [...defaultNames];
        totals = JSON.parse(localStorage.getItem("totals")) || [0,0,0,0];
    } catch(e) {
        names = [...defaultNames];
        totals = [0,0,0,0];
    }
}

function save() {
    try {
        localStorage.setItem("names", JSON.stringify(names));
        localStorage.setItem("totals", JSON.stringify(totals));
    } catch(e) {
        alert("Unable to save data. Make sure you are not in private browsing mode.");
    }
}

const container = document.getElementById("players");

function render() {
    container.innerHTML = "";
    names.forEach((name, i) => {
        const row = document.createElement("div");
        row.className = "row";
        row.innerHTML = `
            <span class="name" onclick="editName(${i})">${name}</span>
            <span>${totals[i]}</span>
            <input type="number" id="input${i}" placeholder="Points">
        `;
        container.appendChild(row);
    });
}

function editName(index) {
    const newName = prompt("Enter player name:", names[index]);
    if (newName && newName.trim() !== "") {
        names[index] = newName.trim();
        save();
        render();
    }
}

function addRound() {
    for (let i = 0; i < totals.length; i++) {
        const inputEl = document.getElementById("input" + i);
        const value = parseInt(inputEl.value) || 0;
        totals[i] += value;
        inputEl.value = ""; // clear input
    }
    save();
    render();
}

function resetGame() {
    if (!confirm("Reset all scores and names?")) return;
    names = [...defaultNames];
    totals = [0,0,0,0];
    save();
    render();
}

// Initial load
load();
render();
</script>

</body>
</html>
